import subprocess
import numpy as np

params = [
    #[5, 2, 1], [5, 2, 2], [5, 2, 3], [5, 2, 4], [5, 2, 5], 
    [5, 2, 6],
    [5, 5, 1], [5, 5, 2], [5, 5, 3], [5, 5, 4], [5, 5, 5], [5, 5, 6],
    #[5, 10, 1], [5, 10, 2], [5, 10, 3], [5, 10, 4], [5, 10, 5], [5, 10, 6],
    #[10, 2, 1], [10, 2, 2], [10, 2, 3], [10, 2, 4], [10, 2, 5], [10, 2, 6],
    #[10, 5, 1], [10, 5, 2], [10, 5, 3], [10, 5, 4], [10, 5, 5], [10, 5, 6],
    #[10, 10, 1], [10, 10, 2], [10, 10, 3], [10, 10, 4], [10, 10, 5], [10, 10, 6],
]

def average(arr):
    return np.average(arr, 0)

for param_set in params:
    print(param_set)
    numbers = []
    t = 0
    for seed in range(100, 105):
        output = subprocess.check_output(f"python3 TOP/runTOP.py --G {param_set[0]} --minSup {param_set[1]} --seqGap {param_set[2]} --seed {seed}", shell=True)
        last5 = output.decode("utf-8").replace("seconds", "").split("\n")[-8:-3]
        #print(last5)
        last5numbers = [round(float(x.split(":")[-1]), 3) for x in last5]
        numbers.append(last5numbers[1:])
        t = last5numbers[0] 
    avg = average(np.array(numbers))
    print(param_set[0], "&", param_set[1], "&", param_set[2], "&", t, "&", avg[0], "&", avg[1], "&", avg[2], "&", avg[3], "\\\\")
    print("\\hline")

'''
[5, 2, 1]
5 & 2 & 1 & 0.46 & 0.8468 & 0.6054 & 0.8498000000000001 & 0.6085999999999998 \\
\hline
[5, 2, 2]
5 & 2 & 2 & 0.85 & 0.8878 & 0.6460000000000001 & 0.8899999999999999 & 0.6508 \\
\hline
[5, 2, 3]
5 & 2 & 3 & 2.62 & 0.9162000000000001 & 0.6806000000000001 & 0.9190000000000002 & 0.6904 \\
\hline
[5, 2, 4]
5 & 2 & 4 & 10.64 & 0.9202 & 0.6963999999999999 & 0.9218 & 0.7034 \\
\hline
[5, 2, 5]
5 & 2 & 5 & 65.48 & 0.9216000000000001 & 0.6964 & 0.9225999999999999 & 0.7023999999999999 \\
\hline
[5, 2, 6]
5 & 2 & 6 & 566.2 & 0.9222000000000001 & 0.6984 & 0.9226000000000001 & 0.7041999999999999 \\
\hline
[5, 5, 1]
5 & 5 & 1 & 0.43 & 0.8248 & 0.6156 & 0.8263999999999999 & 0.6152 \\
\hline
[5, 5, 2]
5 & 5 & 2 & 0.81 & 0.8346 & 0.6288 & 0.835 & 0.6268 \\
\hline
[5, 5, 3]
5 & 5 & 3 & 2.43 & 0.8356 & 0.6298000000000001 & 0.8351999999999998 & 0.6274 \\
\hline
[5, 5, 4]
5 & 5 & 4 & 10.69 & 0.836 & 0.6306 & 0.8356 & 0.6282 \\
\hline
[5, 5, 5]
5 & 5 & 5 & 64.88 & 0.8384 & 0.6327999999999999 & 0.8374 & 0.63 \\
\hline
[5, 5, 6]
5 & 5 & 6 & 497.01 & 0.8385999999999999 & 0.6327999999999999 & 0.8375999999999999 & 0.6298 \\
\hline
'''